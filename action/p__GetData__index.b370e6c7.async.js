"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[857],{5665:function($e,w,n){n.r(w),n.d(w,{default:function(){return Ie}});var ne=n(38416),d=n.n(ne),le=n(42122),D=n.n(le),se=n(861),J=n.n(se),oe=n(27424),P=n.n(oe),e=n(67294),Z=n(11588),x=n(16448),ie=n(43916),ue=n(50915),ce=n(2831),U=n(71577),me=n(11382),ve=n(27049),b=n(46535),de=n(5328),he=n(31955),fe=n(9669),De=n.n(fe),ge="http://10.147.20.160:8082",L=De().create({baseURL:ge,withCredentials:!0,headers:{}});L.interceptors.request.use(function(i){var c=he.Z.get("tianpeng-token");return i.headers.common.Authorization=c||"",i},function(i){return i}),L.interceptors.response.use(function(i){if(i.status!==200)throw new Error("\u7F51\u7EDC\u9519\u8BEF");i=i.data;var c=typeof i.errCode!="undefined"?parseInt(i.errCode,0):0;if(c!==0){if(c===1502)throw new Error(i.message);if(c===1001)return i;throw c!==200&&Z.ZP.error(i.message),new Error(i.message)}return i},function(i){throw new Error(i.message)});var Ee=function(){return{ajaxService:L}},Qe=null,pe=Ee,Ce=function(c,F){var y=pe(),H=y.ajaxService,Y=function(f){return f||{}},T=function(f){return typeof f.data=="undefined"||F&&F.response?f:f.data};return(0,de.ZP)(Y,D()({requestMethod:function(f){return H(D()(D()({},c),f))},onError:function(f){console.log(f)},formatResult:T},F))},W=Ce,Fe=n(30381),C=n.n(Fe),ye=function(c){switch(c){case"\u5168\u8EAB\u9EBB\u9189":return 1;case"\u690E\u7BA1\u5185\u9EBB\u9189":return 2;case"\u5C40\u90E8\u9EBB\u9189":return 3;case"\u590D\u5408\u9EBB\u9189":return 4;case"\u5176\u4ED6\u9EBB\u9189\u65B9\u6CD5":return 9;case"\u5438\u5165\u9EBB\u9189":return 11;case"\u9759\u8109\u9EBB\u9189":return 12;case"\u57FA\u7840\u9EBB\u9189":return 12;case"\u86DB\u7F51\u819C\u4E0B\u8154\u963B\u6EDE\u9EBB\u9189":return 21;case"\u786C\u810A\u819C\u5916\u8154\u963B\u6EDE\u9EBB\u9189":return 22;case"\u795E\u7ECF\u4E1B\u963B\u6EDE\u9EBB\u9189":return 31;case"\u795E\u7ECF\u8282\u963B\u6EDE\u9EBB\u9189":return 32;case"\u795E\u7ECF\u963B\u6EDE\u9EBB\u9189":return 33;case"\u533A\u57DF\u963B\u6EDE\u9EBB\u9189":return 34;case"\u5C40\u90E8\u6D78\u6DA6\u9EBB\u9189":return 35;case"\u8868\u9762\u9EBB\u9189":return 36;case"\u9759\u5438\u590D\u5408\u5168\u9EBB":return 41;case"\u9488\u836F\u590D\u5408\u9EBB\u9189":return 42;case"\u795E\u7ECF\u4E1B\u4E0E\u786C\u819C\u5916\u963B\u6EDE\u590D\u5408\u9EBB\u9189":return 43;case"\u5168\u9EBB\u590D\u5408\u5168\u8EAB\u964D\u6E29":return 44;case"\u5168\u9EBB\u590D\u5408\u63A7\u5236\u6027\u964D\u538B":return 45;default:return null}},Ae=function(c){switch(c){case"1":case"1.1":case"1.2":return"01";case"2":case"2.2":return"02";case"2.1":return"09";case"3":case"3.1":case"3.2":return"03";case"4":return"04";case"5":return"05";case"6":return"06";case"7":return"07";case"8":return"08";case"9":return"99";default:return"99"}},Ne=function(c){return c+""=="2"?21:c+"0"},o={item:"item___huSYS",label:"label___KSFBf",search:"search___dkipw",input:"input___tWoLl",type:"type___YiqD3",searchLabel:"searchLabel___dzkib"},He={searchValue:"searchValue___ly2Nc"},Me=function(c){var F=c.label,y=F===void 0?"":F,H=c.searchValue,Y=H===void 0?"":H,T=c.color;if(!Y)return y||"-";var h=y,f="".concat(y),A=f.toLowerCase(),E=Y.toLowerCase();if(A.indexOf(E)!==-1){var S=f.substring(0,A.indexOf(E)),B=f.substring(A.indexOf(E),A.indexOf(E)+E.length),V=f.substring(A.indexOf(E)+E.length,A.length);h=e.createElement(e.Fragment,null,S,e.createElement("span",{style:{color:T},className:He.searchValue},B),V)}return h},N=Me,Pe=n(58533),Ye=n(61791),Xe={url:"/bzfy/inhospitalBase/list",method:"GET"},Te={url:"/bzfy/inhospitalBase/list2",method:"GET"},Se={url:"/bzfy/inhospitalBase/detail",method:"GET"},Ge=function(){var c=(0,e.useState)(1),F=P()(c,2),y=F[0],H=F[1],Y=(0,e.useState)(""),T=P()(Y,2),h=T[0],f=T[1],A=(0,e.useState)([]),E=P()(A,2),S=E[0],B=E[1],V=(0,e.useState)([]),k=P()(V,2),M=k[0],$=k[1],Be=(0,e.useState)("in"),Q=P()(Be,2),K=Q[0],X=Q[1],Re=(0,e.useState)(!0),q=P()(Re,2),Ze=q[0],be=q[1],j=W(Te,{onSuccess:function(r){H(y+1),B([].concat(J()(S),J()(r))),be(r.length>=20)}}),Le=j.loading,_=j.run,Ve=function(r){var a=r||{},t=r.costGatherResult||{},l={F44:t.generalTreatmentOperation,H44:t.nurse,K44:t.other,D45:t.pathologicDiagnosis,F45:t.laboratoryDiagnosis,H45:t.imagingDiagnosis,K45:t.clinicalDiagnosis,D46:t.nonOperativeTreatment,F46:t.clinicalPhysicalTherapy,H46:t.surgicalTreatment,J46:t.anesthesia,L46:t.operation,D47:t.rehabilitation,F47:t.tcmTreatment,H47:t.westernMedicine,J47:t.antimicrobialDrug,D48:t.chinesePatentDrug,F48:t.chineseHerbalMedicine,H48:t.blood,K48:t.protein,D49:t.globulin,F49:t.clottingFactor,H49:t.cytokine,L49:t.disposableInspection,D50:t.disposableTreatment,F50:t.disposableOperation,J50:t.other2,I43:t.fY_FY0ZFJE,D44:t.ordnMedServfee};l.D43=l.D44+l.F44+l.H44+l.K44+l.D45+l.F45+l.H45+l.K45+l.D46+l.H46+l.D47+l.F47+l.H47+l.D48+l.F48+l.H48+l.K48+l.D49+l.F49+l.H49+l.L49+l.D50+l.F50+l.J50||0;var g=r.operationResult||{},we={D37:g.departureMode,J37:g.hospitalName,J38:g.townshipHospital,D39:g.rehospitalizationPlan,J39:g.rehospitalizationPurpose,D40:g.beforeDay,F40:g.beforeHour,H40:g.beforeMinute,D41:g.afterDay,F41:g.afterHour,H41:g.afterMinute},Je=r.operationDetailResult||[],O={};Je.forEach(function(s,m){if(!(m>6)){var v;O=D()(D()({},O),{},(v={},d()(v,"B".concat(30+m),s.operationCode),d()(v,"C".concat(30+m),C()(s.operationDate).format("YYYYMMDD")),d()(v,"D".concat(30+m),s.operationLevel),d()(v,"E".concat(30+m),s.operationName),d()(v,"F".concat(30+m),s.operator),d()(v,"G".concat(30+m),s.firstAssistant),d()(v,"H".concat(30+m),s.lastAssistant),d()(v,"I".concat(30+m),s.notchGrade),d()(v,"J".concat(30+m),s.incisionHealingCategory),d()(v,"K".concat(30+m),ye(s.anesthesiaType)),d()(v,"L".concat(30+m),s.anesthesiologist),v))}});var u=r.outHospitalResult||{},xe={C20:u.externalCauses,H20:u.externalCausesDisease,C21:u.pathologicDiagnosis,G21:u.pathologicDiagnosisDisease,J21:u.pathologicalNo,C22:u.drugAllergy,G22:u.allergicDrugs,J22:u.autopsy,C23:u.bloodGroup,H23:u.rh,C24:u.chiefOfDepartment,F24:u.firstMate,H24:u.attendingPhysician,K24:u.residentPhysician,C25:u.chargeNurse,F25:u.refresherPhysician,H25:u.internPhysician,K25:u.coder,C26:u.medicalRecordQuality,F26:u.qualityControlPhysician,H26:u.qualityControlNurse,K26:C()(u.qualityControlDate).format("YYYYMMDD")},te=r.outhospitalDetailResult||[],R=te.find(function(s){return s.isMain===1})||{},Ue=te.filter(function(s){return s.isMain!==1})||[],G={};Ue.forEach(function(s,m){if(!(m>14))if(m>6){var v;G=D()(D()({},G),{},(v={},d()(v,"G".concat(12+(m-7)),s.dischargeDiagnosis),d()(v,"H".concat(12+(m-7)),s.diseaseCode?s.diseaseCode.split(",").map(function(z){return z.split("x")[0]}).join(","):""),d()(v,"J".concat(12+(m-7)),s.admissionDiagnosis),v))}else{var I;G=D()(D()({},G),{},(I={},d()(I,"C".concat(13+m),s.dischargeDiagnosis),d()(I,"D".concat(13+m),s.diseaseCode.split(",").map(function(z){return z.split("x")[0]}).join(",")),d()(I,"E".concat(13+m),s.admissionDiagnosis),I))}});var We=D()({C12:R.dischargeDiagnosis,D12:R.diseaseCode?R.diseaseCode.split(",").map(function(s){return s.split("x")[0]}).join(","):"",E12:R.admissionDiagnosis},G),ke={I2:a.age,C3:a.ageMonth,I3:a.birthPlace,G2:C()(a.birthday).format("YYYYMMDD"),K6:a.contactAddress,C7:a.contactPhone,I6:a.contactRelationship,G6:a.contactsName,K4:a.currentAddress,E5:a.currentZipCode,G9:a.diagnose,E1:a.healthCard,G7:C()(a.hospitalizationDate).format("YYYYMMDD"),K7:a.hospitalizationDepartment,I7:a.hospitalizationHour,E9:a.hospitalizationLength,E7:a.hospitalizationMethod,C8:a.hospitalizationRoom,G1:a.hospitalizationsNumber,E4:a.idCard,G8:C()(a.leaveDate).format("YYYYMMDD"),K8:a.leaveDepartment,I8:a.leaveHour,C9:a.leaveRoom,I4:Ne(a.marriage),C1:Ae(a.medicalPayment),C2:a.name,C4:a.nation,K2:a.nationality==="501"?"CHN":"",K3:a.nativePlace,E3:a.newbornBirthWeight,G4:a.occupation,C5:a.phone,K5:a.placeOfWork,E6:a.placeOfWorkZipCode,G5:a.registeredAddress,I5:a.registeredZipCode,E2:a.sex,E8:a.transferDepartment,C6:a.workPhone,I9:a.diagnoseCode?a.diagnoseCode.split("x")[0]:null},re=D()(D()(D()(D()(D()(D()({},l),O),we),xe),We),ke);console.log(re.D43),window.electronAPI&&window.electronAPI.LoadData(re),Z.ZP.success("\u6DFB\u52A0\u6210\u529F\uFF01")},ee=W(Se,{manual:!0,onSuccess:function(r){Ve(r)},onError:function(){Z.ZP.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25!")}}),Ke=ee.loading,Oe=ee.run,ae=function(r){H(1),B([]),_({params:r})};(0,e.useEffect)(function(){window.document.title="\u6570\u636E\u5217\u8868",window.electronAPI&&window.electronAPI.queryList(function(p,r){var a=r.name;x.Z.confirm({content:"\u662F\u5426\u641C\u7D22\u3010"+a+"\u3011",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){ae({keyword:a}),f(a),$(""),X("in")}})})},[]);var ze=function(){Le||_({params:{page:y,keyword:h,bTime:M[0]||null,eTime:M[1]||null,type:K}})};return e.createElement("div",null,e.createElement("div",{className:o.search},e.createElement("div",{className:o.type},e.createElement("div",{className:o.searchLabel},"\u7C7B\u578B\uFF1A"),e.createElement(ie.Z,{options:[{label:"\u5165\u9662",value:"in"},{label:"\u51FA\u9662",value:"out"}],value:K,onChange:X}),e.createElement(ue.Z.RangePicker,{locale:Ye.Z,allowClear:!0,value:M.length>0?[C()(M[0]),C()(M[1])]:[],onChange:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=a.filter(function(l){return l});$(t.length===0?[]:[C()(a[0]).format("YYYY-MM-DD"),C()(a[1]).format("YYYY-MM-DD")])}})),e.createElement("div",{className:o.type},e.createElement("div",{className:o.searchLabel},"\u5173\u952E\u5B57\uFF1A"),e.createElement(ce.Z,{className:o.input,value:h,placeholder:"\u8BF7\u8F93\u5165\u75C5\u6848\u53F7",onChange:function(r){var a=r.target.value;f(a)}})),e.createElement("div",null,e.createElement(U.Z,{type:"primary",onClick:function(){ae({keyword:h,bTime:M[0]||null,eTime:M[1]||null,type:K})}},"\u641C\u7D22"))),e.createElement("div",{id:"scrollableDiv",style:{padding:"0 0 24px 24px",maxHeight:"calc(100vh - 160px)",overflow:"auto",marginTop:16}},e.createElement(Pe.Z,{dataLength:S.length,next:ze,scrollThreshold:1,hasMore:Ze,loader:e.createElement("div",{style:{textAlign:"center"}},e.createElement(me.Z,null)),endMessage:e.createElement(ve.Z,{plain:!0},"\u6CA1\u6709\u66F4\u591A\u6570\u636E\u5566~"),scrollableTarget:"scrollableDiv"},e.createElement(b.ZP,{dataSource:S||[],renderItem:function(r){return e.createElement(b.ZP.Item,{actions:[e.createElement(U.Z,{loading:Ke,type:"link",onClick:function(){x.Z.confirm({content:"\u786E\u5B9A\u628A\u3010".concat(r.name,"\u3011\u7684\u6570\u636E\u586B\u5199\u8FDB\u8868\u683C\u5417\uFF1F"),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){return Oe({params:{id:r.patientId}})}})}},"\u586B\u5199\u6570\u636E")]},e.createElement(b.ZP.Item.Meta,{description:e.createElement("div",{style:{color:"#000"}},e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u75C5\u6848\u53F7\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.medicalRecordNumber}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u75C5\u4EBAId\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.patientId}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u59D3\u540D\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.name}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u8EAB\u4EFD\u8BC1\u53F7\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.idCard}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u624B\u673A\u53F7\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.phone}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u8054\u7CFB\u4EBA\u624B\u673A\u53F7\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.contactPhone}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u5355\u4F4D\u7535\u8BDD\uFF1A"),e.createElement("div",null,e.createElement(N,{searchValue:h,label:r.workPhone}))),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u5165\u9662\u65F6\u95F4\uFF1A"),e.createElement("div",null,r.hospitalizationDate||"-")),e.createElement("div",{className:o.item},e.createElement("div",{className:o.label},"\u51FA\u9662\u65F6\u95F4\uFF1A"),e.createElement("div",null,r.leaveDate||"-")))}))}}))))},Ie=Ge}}]);
